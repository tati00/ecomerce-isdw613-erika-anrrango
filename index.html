<!DOCTYPE html>
<html lang="es">

<head>
    <title>Bienvenido a Mi E-comerce</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <link rel="stylesheet" href="styles/mystyle.css" class="href">
    <link rel="stylesheet" href="styles/taller.css" class="href">
    <script>
        let d = new Date();
        //alert(d) <!--desplega un di치logo-->
        console.log("Hoy es: " + d)

        document.getElementById("esmeraldmoreinfo");
    </script>

    <style>
        .border-column {
            border-right: 2px black solid;
        }

        .details {
            background-color: rgb(106, 23, 23);
        }

        .container-header {
            background-color: rgb(106, 23, 23);
        }

        nav ul li a {
            font-size: 30px;
        }
    </style>
</head>

<body onload="inicializePage1()">
    <!--<h1>Mi E-comerce</h1>-->

    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Mi E-comerce</a> <!--nombre/imagen del sitio web-->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html">About us</a>
                    </li>
                    <li class="nav-item dropdown"> <!---dropdown para crear sub clases-->
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            Necklace
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="product.html">Esmerald</a></li>
                            <li><a class="dropdown-item" href="#">Purple</a></li>
                            <li><a class="dropdown-item" href="#">Red</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="bonus.html">Especiales</a></li>
                        </ul>
                    </li>
                    <!--<li class="nav-item">
                        <a class="nav-link disabled" aria-disabled="true">Disabled</a>elemento desahabilitado </li>-->
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Cont치ctenos</a>
                    </li>
                </ul>
                <form class="d-flex" role="search">
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success" type="submit">Search</button>
                </form>
            </div>
        </div>
    </nav>

    <!--
    <nav>
        <ul>
            <li>
                <a href="#">Productos</a>
            </li>
        </ul>
    </nav>

        <ul>
        <li>Home</li>
        <li>Productos</li>
        <li><a href="about.html" target="blank">Acerca de ...</a></li>
        <li><a href="contact.html" target="blank">Contacto</a></li>
    </ul>-->

    <hr>

    <h1 id="titulo1">Productos en oferta</h1>
    <br>
    <div class="content">
        <div class="row" id="productList">

            <!--<div class="col col-md-3">
                <div class="card" style="width: 18rem;">
                    <img src="assets/images/necklacePURP.png" class="card-img-top" alt="..." />
                    <div class="card-body">
                        <h5 class="card-title">Purple</h5>
                        <p class="card-text">Lorem ipsum dolor sit amet consectetur adipisicing elit. Fuga, quaerat?</p>
                        <a href="#" class="btn btn-primary">Go somewhere</a>
                    </div>
                </div>
            </div>-->
            <!--<div class="col">
                <img src="assets/images/necklaceESM.png" width="150px"></img>
                <p style="background-color: red;" height="100px;"></p>
            </div>
            <div class="col">
                <img src="assets/images/necklaceESM.png" width="150px"></img>
                <p style="background-color: yellow;" height="100px;"></p>
            </div>-->
        </div>
    </div>
    <hr />
    <div class="content" style="margin-top: 40px; margin-bottom: 50px;">
        <div class="alert alert-primary" role="alert" id="alertSuccess">
            Se ha creado el producto de manera exitosa
        </div>
        <div class="alert alert-warning" role="alert" id="alertError">
            Error en la creacion de un producto
        </div>
        <form id="createProduct">
            <div class="form-group">
                <label for="productId">ID</label>
                <input type="text" name="productId" id="productId" placeholder="Id de Producto">
            </div>
            <div class="form-group">
                <label for="productName">Nombre</label>
                <input type="text" name="productName" id="productName" placeholder="Nombre de Producto">
            </div>
            <div class="form-group">
                <label for="productDescription">Descripci칩n</label>
                <input type="text" name="productDescription" id="productDescription"
                    placeholder="Descripci칩n de Producto">
            </div>
            <div class="form-group">
                <label for="productImageUrl">Url de la Imagen</label>
                <input type="text" name="productImageUrl" id="productImageUrl" placeholder="URL de la Imagen de Producto">
            </div>
            <button type="button" id="btnCreateProduct" class="btn btn-primary">Crear Producto</button>
        </form>
    </div>

    <table class="table table-striped table-hover table-border" data-bs-theme="dark">
        <thead>
            <tr class="table-primary">
                <th class="border-column">#</th>
                <th>Primer nombre</th>
                <th>Segundo nombre</th>
                <th>Edad</th>
            </tr>
        </thead>
        <tbody class="table-group-divider">
            <tr>
                <td>1</td>
                <td>Joe</td>
                <td>Doe</td>
                <td>23</td>
            </tr>
        </tbody>
        <tbody>
            <tr>
                <td>2</td>
                <td>Joe</td>
                <td>Doe</td>
                <td>23</td>
            </tr>
        </tbody>
        <tbody>
            <tr>
                <td>3</td>
                <td>Joe</td>
                <td>Doe</td>
                <td>23</td>
            </tr>
        </tbody>
        <tbody>
            <tr>
                <td>4</td>
                <td>Joe</td>
                <td>Doe</td>
                <td>23</td>
            </tr>
        </tbody>
    </table>
    <div>
        <img src="assets/images/necklaceRED.png" class=" img-fluid" alt="...">
    </div>
    <!--
<table>
    <tr>
        <td>
            <a href="product.html" target="_blank">
                <img src="assets/images/necklaceESM.png" width="150px"></img>
            </a>
            <p>ESMERALD</p>
        </td>
        <td>
            <a href="product.html" target="_blank">
                <img src="assets/images/necklaceRED.png" width="122px" alt="NECKLACE GOLDEN RED"></img>
            </a>
            <p>RUBY</p>
        </td>
        <td>
            <a href="product.html" target="_blank">
                <img src="assets/images/necklacePURP.png" width="146px" alt="NECKLACE OF FANTASY"></img>
            </a>
            <p>FANTASY</p>
        </td>
    </tr>
</table>-->


    <!--<p>Mi primer parrafo
            Mi segundo parrafo
        </p>
        <hr>
        <pre>
            Mi primer parrafo
            Mi segundo parrafo

            Mi tercer parrafo
        </pre>
    -->

    <script src="js/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
        crossorigin="anonymous"></script>

    <script src="js/test-script.js"></script>
    <script>
        $(document).ready(function(){
            $('#alertSuccess').hide();
            $('#alertError').hide();
            $('#btnCreateProduct').click(function(){
                createProduct();
            });

            refreshProducts();
        });

        function refreshProducts(){

            $("#productList").html("");

            $.getJSON("http://127.0.0.1:9999/products", function (data) {
                console.log(data);
                data.forEach(item => {
                    var productToAppend = `<div class="col">
                    <div class="card" style="width: 18rem;">
                        <img src="${item.imageUrl}" class="card-img-top img-fluid" alt="Atari 2600">
                            <div class="card-body">
                                <h5 class="card-title">${item.name}</h5>
                                <p class="card-text">${item.description}</p>                                
                                <a href="#" class="btn btn-primary">Detalles</a>
                            </div>
                    </div>
                </div>`
                    $('#productList').append(productToAppend);
                });
            });
        }

        function createProduct(){
            $('#alertSuccess').hide();
            $('#alertError').hide();
            var productId = $('#productId').val();
            var productName = $('#productName').val();
            var productDescription = $('#productDescription').val();
            var productImageUrl = $('#productImageUrl').val();

            //TODO: Validaciones
            $.ajax({
                url: 'http://127.0.0.1:9999/products',
                method: 'POST',
                data: JSON.stringify({ id: productId, name: productName, description: productDescription, imageUrl: productImageUrl}),
                dataType: 'json', //Response
                processData: false,
                contentType: 'application/json' //Request
            }).done(function(data){
                console.log(data);
                $('#alertSuccess').show();
                refreshProducts();
            }).fail(function(){
                $('#alertError').show();
                console.log('ERROR');
            });

        }

    </script>


</body>

</html>